#!/usr/bin/env python
#######################################################################################
# This script is meant to be used as a global smudge-clean filter for removing        #
# sensitive data from your commits.                                                   #
#######################################################################################
import sys
from functools import reduce

REPLACE_CONTENT = [
    ('USERNAME', 'USERNAME'),
    ('PASSWORD', 'PASSWORD'),
    ('EMAIL', 'EMAIL'),
    ('WORKSERVER', 'WORKSERVER'),
    ('PERSONALSERVER', 'PERSONALSERVER'),
    ('SECRETTOKEN', 'SECRETTOKEN'),
]

def smudge():
    for line in sys.stdin:
        line = reduce(lambda s, r: s.replace(*r), REPLACE_CONTENT, line)
        sys.stdout.write(line)

def clean():
    for line in sys.stdin:
        line = reduce(lambda s, r: s.replace(*r[::-1]), REPLACE_CONTENT, line)
        sys.stdout.write(line)

if __name__ == '__main__':
    try:
        if sys.argv[1] == '--smudge':
            smudge()
        elif sys.argv[1] == '--clean':
            clean()
    except Exception as e:
        print(e)
