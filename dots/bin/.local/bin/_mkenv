#!/usr/bin/env bash
set -e

PYTHON="${PYTHON:-python3.9}"
PREFIX="${PREFIX:-.venv}"

# Make a python virtualenv
${PYTHON} -m venv ${PREFIX}

# Install useful tools
${PREFIX}/bin/${PYTHON} -m \
    pip install \
      black \
      flake8 \
      mypy \
      isort \
      pytest \
      pytest-cov \
      pytest-mock

[[ -f requirements.txt ]] &&  \
    ${PREFIX}/bin/${PYTHON} -m \
        pip install -r requirements.txt
